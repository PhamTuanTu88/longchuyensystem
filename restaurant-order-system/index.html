<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Order Nh√† H√†ng</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>

<!-- MODAL TH√îNG B√ÅO -->
<div id="notification-modal" class="notification-modal">
  <div class="notification-content">
    <div class="notification-icon" id="notification-icon"></div>
    <div class="notification-message" id="notification-message"></div>
    <button class="notification-btn" onclick="closeNotification()">ƒê√≥ng</button>
  </div>
</div>

<!-- MODAL NH·∫¨P GI√Å (CHO L·∫®U / C·ªñ) -->
<div id="price-modal" class="notification-modal" aria-hidden="true">
  <div class="notification-content" role="dialog" aria-modal="true" style="max-width:420px;">
    <div style="font-weight:700;margin-bottom:8px" id="price-modal-title">Nh·∫≠p gi√° m√≥n</div>
    <div style="margin-bottom:12px;color:var(--text-secondary)" id="price-modal-sub">Nh·∫≠p gi√° ph√π h·ª£p cho m√≥n n√†y</div>
    <div style="display:flex;gap:8px;justify-content:center;align-items:center;margin-bottom:16px">
      <input id="price-input" type="number" min="0" step="1000" placeholder="Gi√° (ƒë)" style="width:65%;padding:8px;border:1px solid var(--border);border-radius:8px;text-align:right" />
      <input id="price-qty" type="number" min="1" step="1" value="1" placeholder="SL" style="width:30%;padding:8px;border:1px solid var(--border);border-radius:8px;text-align:center" />
    </div>
    <div style="display:flex;gap:10px;justify-content:center">
      <button class="notification-btn" onclick="confirmPrice()">X√°c nh·∫≠n</button>
      <button class="notification-btn" style="background:#e5e7eb;color:var(--text-primary)" onclick="closePriceModal()">H·ªßy</button>
    </div>
  </div>
</div>

<!-- MODAL H√ìA ƒê∆†N -->
<div id="invoice-modal" class="modal">
  <div class="modal__backdrop"></div>

  <!-- ph·∫ßn n√†y l√† v√πng in (print-area) -->
  <div class="modal__dialog print-area">
    <div class="modal__header">
      <div>
        <div style="font-weight:700">Nh√† H√†ng Long Chuy√™n</div>
        <div class="subtitle">H√≥a ƒë∆°n b√†n <span id="mTable"></span></div>
      </div>

      <button id="modal-close" class="modal__close" aria-label="ƒê√≥ng">√ó</button>
    </div>

    <div class="modal__body">
      <table style="width:100%;border-collapse:collapse">
        <thead>
          <tr>
            <th style="text-align:left;border-bottom:1px solid #e5e7eb;padding:6px">M√≥n</th>
            <th style="text-align:right;border-bottom:1px solid #e5e7eb;padding:6px">SL</th>
            <th style="text-align:right;border-bottom:1px solid #e5e7eb;padding:6px">Gi√°</th>
            <th style="text-align:right;border-bottom:1px solid #e5e7eb;padding:6px">Th√†nh ti·ªÅn</th>
          </tr>
        </thead>
        <tbody id="mBody"></tbody>
      </table>

      <div class="total-line" style="margin-top:8px">
        T·ªïng: <span id="mTotal">0</span> ƒë
      </div>
    </div>

    <div class="modal__footer">
      <button id="btn-print" class="btn-primary">In h√≥a ƒë∆°n</button>
      <button id="btn-confirm" class="btn-primary outline">X√°c nh·∫≠n thanh to√°n</button>
    </div>
  </div>
</div>


<body>
<header>
  <div style="display:flex;align-items:center;justify-content:space-between">
    <div>Nh√† H√†ng Long Chuy√™n ‚Äî 30 b√†n</div>
    <div><a id="logout-link" href="/logout" style="color:#fff;background:rgba(255,255,255,0.12);padding:6px 10px;border-radius:8px;text-decoration:none;font-weight:700">ƒêƒÉng xu·∫•t</a></div>
  </div>
</header>
<div style="position:relative;padding:8px 16px">
  <button id="btn-toggle-reports" style="position:absolute;right:16px;top:8px">T·ªïng k·∫øt</button>
</div>
<div class="layout">
  <div class="tables-panel">
    <h3>Ch·ªçn b√†n</h3>
    <div id="grid" class="grid-tables"></div>
  </div>

  <div class="order-panel">
    <div class="order-header">
      <h3 id="order-title">Ch∆∞a ch·ªçn b√†n</h3>
      <small id="order-note">B·∫•m b√†n b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu order</small>
    </div>

    <div class="menu-tabs">
      <button id="tab-bia" class="active" onclick="setCategory('bia')">Bia / nh·∫≠u</button>
      <button id="tab-lau" onclick="setCategory('lau')">L·∫©u</button>
      <button id="tab-co" onclick="setCategory('co')">C·ªó m√≥n theo y√™u c·∫ßu</button>
    </div>

    <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
      <input id="menu-search" type="search" placeholder="T√¨m m√≥n..." style="flex:1;padding:8px;border:1px solid var(--border);border-radius:8px" />
      <button id="menu-clear-search" title="X√≥a t√¨m ki·∫øm" style="padding:8px 10px;border-radius:8px;border:1px solid var(--border);background:var(--card)">‚úñ</button>
    </div>

    <div id="menu-list" class="menu-list"></div>

    <h4>Danh s√°ch m√≥n ƒë√£ order</h4>
    <table>
      <thead>
        <tr>
          <th>M√≥n</th>
          <th>SL</th>
          <th>Gi√°</th>
          <th>Th√†nh ti·ªÅn</th>
          <th></th>
        </tr>
      </thead>
      <tbody id="order-body"></tbody>
    </table>
    <div class="total-line">
      T·ªïng: <span id="order-total">0</span> ƒë
    </div>
  </div>
  <div class="total-line">
    <button id="btn-payment" onclick="payment()" style="margin-right: 12px;">Thanh to√°n</button>
    <button id="btn-add-summary" style="margin-right: 20px;">T·ªïng k·∫øt</button>
  </div>

  <!-- Reports panel -->
  <div id="reports-container" style="display:none;">
    <div class="reports-panel" style="margin:16px;padding:12px;border:1px solid var(--border);border-radius:8px;max-width:420px">
      <h3 style="margin-top:0">B√°o c√°o</h3>
      <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
        <label for="report-type">Lo·∫°i</label>
        <select id="report-type">
          <option value="daily">H√†ng ng√†y</option>
          <option value="monthly">H√†ng th√°ng</option>
          <option value="yearly">H√†ng nƒÉm</option>
        </select>
        <input id="report-date" type="date" />
        <button id="btn-get-report">L·∫•y</button>
      </div>

      <div style="display:flex;gap:12px;align-items:center;margin-bottom:8px">
        <div>T·ªïng: <strong id="report-total">0</strong> ƒë</div>
        <div>S·ªë ho√° ƒë∆°n: <strong id="report-count">0</strong></div>
        <button id="btn-export-report">Xu·∫•t CSV</button>
      </div>

      <hr />
      <div style="display:flex;justify-content:space-between;align-items:center">
        <strong>Kho t·ªïng k·∫øt (nh·ªØng entry b·∫°n b·∫•m 'T·ªïng k·∫øt')</strong>
        <div>
          <button id="btn-clear-summaries">X√≥a</button>
          <button id="btn-export-summaries">Xu·∫•t CSV</button>
        </div>
      </div>
      <div id="collected-summaries" style="max-height:200px;overflow:auto;margin-top:8px"></div>

      <hr />
      <div style="text-align:center">
        <button id="btn-clear-all-data" style="background:#ef4444;color:#fff;border:none;padding:8px 12px;border-radius:8px;font-size:13px;font-weight:700;cursor:pointer;box-shadow:var(--shadow-sm)">üóëÔ∏è X√≥a t·∫•t c·∫£ d·ªØ li·ªáu test</button>
      </div>
    </div>
  </div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script src="script.js"></script>
<script src="menu-enhancements.js"></script>
<script src="clear-data-helper.js"></script></body>
</html>
